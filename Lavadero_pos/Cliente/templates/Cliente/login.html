{% load static %}

<!DOCTYPE html>
<html
  lang="es"
  class="light-style"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="{% static 'materio/' %}"
  data-template="vertical-menu-template-free"
>
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
  />

  <title>Iniciar Sesión - Lavadero POS</title>
  <meta name="description" content="Sistema de Gestión de Lavadero" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{% static 'materio/img/favicon/favicon.ico' %}" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet"
  />

  <!-- Icons -->
  <link rel="stylesheet" href="{% static 'materio/vendor/fonts/boxicons.css' %}" />

  <!-- Core CSS -->
  <link rel="stylesheet" href="{% static 'materio/vendor/css/core.css' %}" />
  <link rel="stylesheet" href="{% static 'materio/vendor/css/theme-default.css' %}" />
  <link rel="stylesheet" href="{% static 'materio/css/demo.css' %}" />

  <!-- Login Responsive Styles -->
  <style>
    @media (min-width: 768px) {
      .authentication-inner {
        max-width: 400px !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }
    }
  </style>

  <!-- Helpers -->
  <script src="{% static 'materio/vendor/js/helpers.js' %}"></script>
  <script src="{% static 'materio/js/config.js' %}"></script>
</head>

<body>
  <!-- Content -->
  <div class="container-xxl">
    <div class="authentication-wrapper authentication-basic container-p-y">
      <div class="authentication-inner py-4 mx-4">
        <!-- Login -->
        <div class="card">
          <div class="card-body">
            <!-- Logo -->
            <div class="app-brand justify-content-center mb-4 mt-2">
              <a href="javascript:void(0);" class="app-brand-link gap-2">
                <span class="app-brand-logo demo">
                  <svg
                    viewBox="0 0 25 42"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                  >
                    <defs>
                      <path
                        d="M13.7071045,0.5 C6.0147235,0.5 0.5,5.98772511 0.5,13.5862068 L0.5,27.2496644 C0.5,34.8481461 6.0147235,40.5 13.7071045,40.5 C21.3994856,40.5 27,34.8481461 27,27.2496644 L27,13.5862068 C27,5.98772511 21.3994856,0.5 13.7071045,0.5 Z"
                        id="path-1"
                      ></path>
                      <filter
                        x="-50%"
                        y="-50%"
                        width="200%"
                        height="200%"
                        filterUnits="objectBoundingBox"
                        id="filter-2"
                      >
                        <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
                        <feGaussianBlur stdDeviation="3.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
                        <feColorMatrix
                          values="0 0 0 0 0.359180953 0 0 0 0 0.575211693 0 0 0 0 0.809357541 0 0 0 0.3 0"
                          type="matrix"
                          in="shadowBlurOuter1"
                        ></feColorMatrix>
                      </filter>
                    </defs>
                    <g id="Brand-Logo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Group" transform="translate(2.000000, 1.000000)">
                        <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>
                        <use fill="#696CFF" fill-rule="evenodd" xlink:href="#path-1"></use>
                      </g>
                    </g>
                  </svg>
                </span>
                <span class="app-brand-text demo text-heading fw-bolder">EMOTORS</span>
              </a>
            </div>
            <!-- /Logo -->
            
            <br>
            <p class="mb-4">Por favor inicia sesión con tu cuenta</p>

            {% if form.non_field_errors %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <strong>Error:</strong>
              {% for error in form.non_field_errors %}
                <div>{{ error }}</div>
              {% endfor %}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endif %}

            <form id="formAuthentication" class="mb-3" method="POST">
              {% csrf_token %}

              <div class="mb-3">
                <label for="id_nombreUsuario" class="form-label">Usuario</label>
                <input
                  type="text"
                  class="form-control {% if form.nombreUsuario.errors %}is-invalid{% endif %}"
                  id="id_nombreUsuario"
                  name="nombreUsuario"
                  placeholder="Ingresa tu usuario"
                  autofocus
                />
                {% if form.nombreUsuario.errors %}
                  <div class="invalid-feedback">{{ form.nombreUsuario.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="mb-3 form-password-toggle">
                <label class="form-label" for="id_contrasenaUsuario">Contraseña</label>
                <div class="input-group input-group-merge">
                  <input
                    type="password"
                    id="id_contrasenaUsuario"
                    class="form-control {% if form.contrasenaUsuario.errors %}is-invalid{% endif %}"
                    name="contrasenaUsuario"
                    placeholder="Ingresa tu contraseña"
                    aria-describedby="password"
                  />
                  <span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
                  {% if form.contrasenaUsuario.errors %}
                    <div class="invalid-feedback">{{ form.contrasenaUsuario.errors.0 }}</div>
                  {% endif %}
                </div>
              </div>

              <div class="mb-3">
                <button class="btn btn-primary d-grid w-100" type="submit">Iniciar Sesión</button>
              </div>
            </form>
          </div>
        </div>
        <!-- /Login -->
      </div>
    </div>
  </div>

  <!-- Core JS -->
  <script src="{% static 'materio/vendor/libs/jquery/jquery.js' %}"></script>
  <script src="{% static 'materio/vendor/libs/popper/popper.js' %}"></script>
  <script src="{% static 'materio/vendor/js/bootstrap.js' %}"></script>
  <script src="{% static 'materio/vendor/js/main.js' %}"></script>

  <!-- Page JS -->
  <script>
    // Show/hide password
    document.addEventListener("DOMContentLoaded", function (e) {
      const passwordToggle = document.querySelector(".input-group-text");
      if (passwordToggle) {
        passwordToggle.addEventListener("click", function () {
          const passwordInput = document.querySelector("#id_contrasenaUsuario");
          const icon = passwordToggle.querySelector("i");
          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("bx-hide");
            icon.classList.add("bx-show");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("bx-show");
            icon.classList.add("bx-hide");
          }
        });
      }
    });
  </script>
</body>
</html>
