{% extends 'Cliente/base.html' %}

{% block title %}Ticket Orden #{{ orden.id }} - Lavadero POS{% endblock %}



{% block content %}

<body class="ticket-orden-page">
    <div class="ticket-container">
        <div class="ticket-header">
            <div class="ticket-numero">ORDEN #{{ orden.id }}</div>
            <div class="ticket-fecha">{{ orden.fecha_creacion|date:"d/m/Y - H:i" }}</div>
        </div>

        <div class="ticket-section">
            <div class="ticket-label">LAVADERO</div>
            <div class="ticket-valor">EMOTORS POS</div>
            <div class="ticket-label">UBICACI√ìN</div>
            <div class="ticket-valor">Soacha, Cundinamarca</div>
        </div>

        <div class="ticket-section">
            <div class="ticket-label">PLACA DEL VEH√çCULO</div>
            <div class="ticket-valor">{{ orden.vehiculo.placa }}</div>
            <div class="ticket-label">TIPO</div>
            <div class="ticket-valor">{{ orden.vehiculo.get_tipo_display }}</div>
            {% if orden.vehiculo.cliente %}
            <div class="ticket-label">CLIENTE</div>
            <div class="ticket-valor">{{ orden.vehiculo.cliente.nombre|default:"Cliente" }}</div>
            {% endif %}
        </div>

        <div class="ticket-section">
            <div style="font-weight: 600; margin-bottom: 10px;">SERVICIOS PRESTADOS</div>
            {% for servicio in orden.servicios.all %}
            <div class="linea">
                <span class="linea-nombre">{{ servicio.nombre }}</span>
                <span class="linea-precio">${{ servicio.precio|floatformat:0 }}</span>
            </div>
            {% endfor %}
        </div>

        {% if orden.observaciones %}
        <div class="ticket-section">
            <div class="ticket-label">OBSERVACIONES</div>
            <div class="ticket-valor">{{ orden.observaciones }}</div>
        </div>
        {% endif %}

        <div class="total-section">
            <div class="total-label">TOTAL A PAGAR</div>
            <div class="total-monto">${{ orden.total|default:"0"|floatformat:0 }}</div>
        </div>

        <div class="ticket-footer">
            ‚úÖ ¬°Gracias por preferir EMOTORS!<br>
            Conserva este tiquet para retirar tu veh√≠culo
        </div>
    </div>

    <div class="botones-accion">
        <button class="btn btn-imprimir" onclick="connectAndPrint()">üñ®Ô∏è Imprimir Ticket</button>
        <a href="/nueva-orden/" class="btn btn-descargar">‚ûï Nueva Orden</a>
        <a href="/" class="btn btn-volver">üè† Dashboard</a>
    </div>

    <div id="status" style="text-align: center; margin-top: 20px; color: var(--text-muted); font-size: 14px;"></div>

    {% load static %}
    <script src="{% static 'Cliente/js/ticket_orden.js' %}"></script>
</body>
{% endblock %}