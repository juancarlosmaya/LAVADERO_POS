{% extends 'Cliente/base.html' %}

{% block title %}Nueva Orden - Lavadero POS{% endblock %}


{% block content %}

<body class="nueva-orden-page">
    <div class="orden-container">
        <div class="header-orden">
            <h1>Nueva Orden de Lavado</h1>
            <p>Sistema de Órdenes</p>
        </div>

        <form method="POST" id="orderForm">
            {% csrf_token %}

            <!-- Información del Vehículo -->
            <div class="form-section">
                <h2>Información del Vehículo</h2>
                <div class="form-row">
                    <div class="form-group">
                        {{ vehiculo_form.placa.label_tag }}
                        {{ vehiculo_form.placa }}
                    </div>
                    <div class="form-group">
                        {{ vehiculo_form.tipo.label_tag }}
                        {{ vehiculo_form.tipo }}
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        {{ vehiculo_form.marca.label_tag }}
                        {{ vehiculo_form.marca }}
                    </div>
                    <div class="form-group">
                        {{ vehiculo_form.modelo.label_tag }}
                        {{ vehiculo_form.modelo }}
                    </div>
                </div>
            </div>

            <!-- Información del Cliente -->
            <div class="form-section">
                <h2>Información del Cliente</h2>
                <div class="form-row">
                    <div class="form-group">
                        {{ cliente_form.nombre.label_tag }}
                        {{ cliente_form.nombre }}
                    </div>
                    <div class="form-group">
                        {{ cliente_form.celular.label_tag }}
                        {{ cliente_form.celular }}
                    </div>
                </div>
            </div>

            <!-- Servicios -->
            <div class="form-section">
                <h2>Seleccionar Servicios</h2>
                <div class="servicios-list" id="servicesContainer">
                    {% for servicio in servicios %}
                    <div class="servicio-item" data-category="{{ servicio.categoria }}">
                        <div class="servicio-info">
                            <div class="servicio-nombre">{{ servicio.nombre }}</div>
                            <div class="servicio-precio">${{ servicio.precio|floatformat:0 }}</div>
                        </div>
                        <input type="checkbox" class="servicio-checkbox" name="servicios" value="{{ servicio.id }}">
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Observaciones -->
            <div class="form-section">
                <h2>Observaciones Adicionales</h2>
                <div class="form-group">
                    {{ orden_form.observaciones }}
                </div>
            </div>

            <!-- Resumen -->
            <div class="resumen-orden">
                <div class="resumen-row">
                    <span>Subtotal:</span>
                    <span>$<span id="subtotal">0</span></span>
                </div>
                <div class="resumen-total">
                    <span>Total a Pagar:</span>
                    <span>$<span id="total">0</span></span>
                </div>
            </div>

            <!-- Botones -->
            <div class="botones-accion">
                <button type="submit" class="btn btn-enviar">Guardar e Imprimir Orden</button>
                <a href="/" style="display: flex; align-items: center;" class="btn btn-cancelar">Cancelar</a>
            </div>
        </form>
    </div>

    {% load static %}
    <script src="{% static 'Cliente/js/nueva_orden.js' %}"></script>
</body>
{% endblock %}